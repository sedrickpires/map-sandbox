(this["webpackJsonpmap-sandbox"]=this["webpackJsonpmap-sandbox"]||[]).push([[0],{181:function(e,t,n){},182:function(e,t,n){},283:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var r=n(8),i=n(0),a=n.n(i),c=n(32),s=n.n(c),l=(n(181),n(182),n(65)),o=n(316),d=n(325),u=n(317),j=n(59),b=n(328),O=n(54),p=n(85),f=Object(p.b)({name:"markers",initialState:{menuOpen:!0},reducers:{toggleMenu:function(e,t){e.menuOpen=!e.menuOpen}}}),m=f.actions.toggleMenu,x=f.reducer,h=function(e){var t=e.clickHandler;return Object(r.jsx)("div",{className:"leaflet-top leaflet-right",children:Object(r.jsx)("div",{className:"leaflet-control leaflet-bar menu-control",children:Object(r.jsx)(j.a,{size:"large",icon:Object(r.jsx)(b.a,{}),onClick:t,type:"primary"})})})},g={toggleMenu:m},v=Object(O.b)((function(e){return{markers:e.markers}}),g)((function(e){var t=e.toggleMenu,n=e.markers,a=Object(i.useState)(null),c=Object(l.a)(a,2),s=c[0],j=c[1];Object(i.useEffect)((function(){if(s&&n)if(1===n.length&&n[0].visible)s.setView([n[0].latitude,n[0].longitude],s.getZoom());else if(n.length>1){var e=[];n.forEach((function(t){t.visible&&e.push([t.latitude,t.longitude])})),s.fitBounds(e)}}),[n,s]);var b=Object(i.useCallback)((function(e){j(e)}),[]);return console.log("Markers",n),Object(r.jsx)("div",{children:Object(r.jsxs)(o.a,{center:[45.4,-75.7],zoom:12,whenCreated:b,children:[Object(r.jsx)(d.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),(null===n||void 0===n?void 0:n.length)&&n.map((function(e){return e.visible?Object(r.jsx)(u.a,{position:[e.latitude,e.longitude]},e.id):null})),Object(r.jsx)(h,{clickHandler:function(){t()}})]})})})),k=n(322),y=n(318),M=n(319),C=n(324),F=n(67),S=n(321),V=n(323),w=Object(p.b)({name:"markers",initialState:[],reducers:{addMarker:function(e,t){e.push(t.payload)},removeMarker:function(e,t){var n=t.payload.id;return e.filter((function(e){return e.id!==n}))},toggleMakerVisible:function(e,t){var n=t.payload.id,r=e.findIndex((function(e){return e.id===n}));r>=0&&(e[r].visible=!e[r].visible)},updateMarker:function(e,t){}}}),I=w.actions,N=I.addMarker,P=I.removeMarker,z=I.toggleMakerVisible,E=(I.updateMarker,w.reducer),A={addMarker:N},B=Object(O.b)(null,A)((function(e){var t=e.addMarker,n=S.a.useForm(),i=Object(l.a)(n,1)[0];return Object(r.jsx)(S.a,{form:i,onFinish:function(e){var n=Object(F.a)({visible:!0,id:Date.now()},function(e){var t=e.split(",");return{latitude:parseFloat(t[0].trim()),longitude:parseFloat(t[1].trim())}}(e.coordinates));t(n),i.resetFields()},layout:"vertical",children:Object(r.jsx)(y.a,{children:Object(r.jsxs)(M.a,{span:24,children:[Object(r.jsx)(y.a,{children:Object(r.jsx)(M.a,{span:24,children:Object(r.jsx)(S.a.Item,{name:"coordinates",label:"Coordinates",rules:[{required:!0},{pattern:/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/g,message:"Enter a valid latitude"}],tooltip:"e.g 48.8583701,2.2922926",children:Object(r.jsx)(V.a,{})})})}),Object(r.jsx)(y.a,{children:Object(r.jsx)(M.a,{children:Object(r.jsx)(j.a,{htmlType:"submit",className:"add-marker-button",type:"primary",children:"Add Marker"})})})]})})})})),T=n(320),D=n(327),H=n(330),J=n(326),L=(n(283),{removeMarker:P,toggleMakerVisible:z}),q=Object(O.b)((function(e){return{markers:e.markers}}),L)((function(e){var t=e.markers,n=e.removeMarker,a=e.toggleMakerVisible,c=Object(i.useCallback)((function(e){var t=e.id;n({id:t})}),[n]),s=Object(i.useCallback)((function(e){var t=e.id;a({id:t})}),[a]);return Object(r.jsx)(T.a,{columns:[{title:"Visibility",dataIndex:"visible",key:"visibility",render:function(e,t){return Object(r.jsx)(j.a,{icon:t.visible?Object(r.jsx)(D.a,{}):Object(r.jsx)(H.a,{}),type:t.visible?"primary":"default",shape:"circle",onClick:function(){return s(t)}})}},{title:"Coordiantes",dataIndex:"coordinates",key:"coordinates",render:function(e,t){return Object(r.jsx)("div",{className:"cooridnates",children:"".concat(t.latitude,", ").concat(t.longitude)})}},{title:"Options",key:"options",align:"center",render:function(e,t){return Object(r.jsx)(J.a,{onClick:function(){return c(t)}})}}],dataSource:t,pagination:!1,footer:null,size:"small",bordered:!0})})),K=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(B,{}),Object(r.jsx)(q,{})]})},Z=n(329),$=k.a.Panel,G=function(e){return Object(r.jsxs)(y.a,{children:[Object(r.jsx)(M.a,{span:12,children:Object(r.jsx)("span",{className:"drawer-title",children:"Map Sandbox"})}),Object(r.jsx)(M.a,{span:12,children:Object(r.jsx)(j.a,{icon:Object(r.jsx)(Z.a,{}),type:"primary",style:{float:"right"},onClick:e})})]})},Q={toggleMenu:m},R=Object(O.b)((function(e){return{menuVisible:e.app.menuOpen}}),Q)((function(e){var t=e.menuVisible,n=e.toggleMenu;return Object(r.jsx)(C.a,{title:G(n),placement:"right",width:400,closable:!1,onClose:n,visible:t,headerStyle:{background:"#1890ff",color:"#FFF"},children:Object(r.jsxs)(k.a,{defaultActiveKey:["1"],children:[Object(r.jsx)($,{header:"Markers",children:Object(r.jsx)("div",{children:Object(r.jsx)(K,{})})},"1"),Object(r.jsx)($,{header:"Polylines - Coming soon",disabled:!0,children:Object(r.jsx)("p",{})},"2"),Object(r.jsx)($,{header:"Polygons - Coming soon",disabled:!0,children:Object(r.jsx)("p",{})},"3")]})})}));var U=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(v,{}),Object(r.jsx)(R,{})]})},W=(n(311),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,331)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))}),X=n(42),Y=Object(X.c)({markers:E,app:x}),_=Object(p.a)({reducer:Y});s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(O.a,{store:_,children:Object(r.jsx)(U,{})})}),document.getElementById("root")),W()}},[[312,1,2]]]);
//# sourceMappingURL=main.9c48d03b.chunk.js.map